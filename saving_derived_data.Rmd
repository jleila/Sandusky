---
title: "saving_derived_data"
author: "Bouzaher, Julia"
date: "2/21/2021"
output: html_document
---

This document saves all of the derived dataframes and shapefiles so that the Shiny App can be uploaded to ShinyApps.io or otherwise run independently with the derived data calls and without having to run the .Rmd files.

```{r}
library(raster)

st_write(final, dsn="data/derived/final.shp", delete_dsn= TRUE)
st_write(Wetlands3, dsn="data/derived/Wetlands3.shp", delete_dsn= TRUE)
fwrite(parks, file="data/derived/parks.txt")


raster::writeRaster(ras_2001, filename=file.path("data/derived/ras_2001.gri"),overwrite=TRUE)
raster::writeRaster(ras_2008, filename=file.path("data/derived/ras_2008.gri"),overwrite=TRUE)
raster::writeRaster(ras_2010, filename=file.path("data/derived/ras_2010.gri"),overwrite=TRUE)
raster::writeRaster(ras_2012, filename=file.path("data/derived/ras_2012.gri"),overwrite=TRUE)
raster::writeRaster(ras_2014, filename=file.path("data/derived/ras_2014.gri"),overwrite=TRUE)
raster::writeRaster(ras_2016, filename=file.path("data/derived/ras_2016.gri"),overwrite=TRUE)


test_2001 <- raster::raster("data/derived/ras_2001.gri") 
test_2008 <- raster::raster("data/derived/ras_2008.gri") 
test_2010 <- raster::raster("data/derived/ras_2010.gri") 
test_2012 <- raster::raster("data/derived/ras_2012.gri") 
test_2014 <- raster::raster("data/derived/ras_2014.gri")
test_2016<- raster::raster("data/derived/ras_2016.gri")



leaflet() %>%
   addRasterImage(test_2016, pal1, opacity = 1, project = FALSE, group = "Land Cover 2016") %>%
   addRasterImage(test_2014, pal2, opacity = 1, project = FALSE, group = "Land Cover 2014") %>%
   addRasterImage(test_2012, pal3, opacity = 1, project = FALSE, group = "Land Cover 2012") %>%
   addRasterImage(test_2010, pal4, opacity = 1, project = FALSE, group = "Land Cover 2010") %>%
   addRasterImage(test_2008, pal5, opacity = 1, project = FALSE, group = "Land Cover 2008") %>%
  addRasterImage(test_2001, pal6, opacity = 1, project = FALSE, group = "Land Cover 2001") %>%
  addLegend(pal = pal4, opacity = 1, values = values(ras_2010), labFormat = function(type, cuts, p) {paste0(labels2)}, group = "Land Cover  Legend", title = "Land Cover Legend") %>%
  addLayersControl(
     overlayGroups = c("Land Cover 2001", "Land Cover 2008", "Land Cover 2010", "Land Cover 2012", "Land Cover 2014", "Land Cover 2016"),
     options = layersControlOptions(collapsed = TRUE))


```